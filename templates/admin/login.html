{% extends "base.html" %}

{% block head %}
<style>
    main {
        align-items: center;
    }
    section.login { 
        display: flex;
        max-width: 400px;
        width: 100%;
        gap: 1.5rem;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
        background-color: var(--font);
        color: var(--background);
    }
    section.login error.login-error {
        background: #ff7b7b;
        color: #6e1616;
        padding: 0.8rem;
        font-size: 0.9rem;
    }
    section.login form, section.login form > section {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        width: 100%;
    }
    section.login form > section {
        gap: 0;
    }
    section.login form label {
        font-size: 0.8rem;
    }
    section.login form input {
        background: #eee;
        border: 2px solid #ddd;
        padding: 0.5rem;
        font-size: 1rem;
        transition: border-color 0.2s ease;
    }
    section.login form input:focus, section.login form input:hover {
        outline: none;
        border-color: #aaa;
    }
    section.login form button {
        padding: 0.5rem;
        font-size: 1rem;
        font-weight: 500;
        color: var(--font);
        background: linear-gradient(90deg, #666 -10%, #222 70%, #333 100%);
        cursor: pointer;
    }
    section.login hr {
        width: 100%;
        height: 0px;
        border: none;
        border-top: 1px solid #bbb;
    }
    section.login a {
        text-decoration: none;
    }
</style>
{% endblock head %} 

{% block content %}
    <section class="login">
        <h1>Anmelden</h1>

        <form action="/admin/login" method="post">
            {% if error %}
            <error class="login-error active">{{ error }}</error>
            {% endif %}
            
            <section>
                <label for="username">Benutzername</label>
                <input 
                    type="text" 
                    id="username" 
                    name="username"
                    required 
                    autocomplete="username"
                    placeholder="Geben Sie Ihren Nutzername an."
                >
            </section>

            <section>
                <label for="password">Passwort</label>
                <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    required 
                    autocomplete="current-password"
                    placeholder="Geben Sie Ihr Passwort ein."
                >
            </section>

            <button type="submit" class="login-button">
                Anmelden
            </button>
        </form>
        <hr>
        <a href="/">← Zurück zur Startseite</a>
    </section>

    <script>
        const loginForm = document.querySelector('main section.login form');
        const loginButton = loginForm.querySelector('.login-button');
        const errorMessage = loginForm.querySelector('error');

        if(errorMessage) {
            const inputs = loginForm.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    errorMessage.classList.remove('active');
                });
            });
        }

        loginForm.addEventListener('submit', function(e) {
            loginButton.disabled = true;
        });
        window.addEventListener('load', function() {
            loginForm.querySelector('input[name=username]').focus();
        });
    </script>
{% endblock content %}


